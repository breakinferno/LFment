!function(e){function t(t){for(var n,a,i=t[0],s=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],o[a]&&p.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(f&&f(t);p.length;)p.shift()();return u.push.apply(u,c||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==o[s]&&(n=!1)}n&&(u.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={0:0},u=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/lib/";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var f=s;u.push([90,1]),r()}({131:function(e,t){},132:function(e,t){},178:function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw u}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var a=r(179),i=r(198),s=r(215),c=r(30),f=c.logger,l=c.signer,p=(c.verifier,c.encryptData),m=new i("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCKIzX+dU/e+xot+qlHoDbweVaW\nMUjGUVCsUTbT/y8ifsNN1NnQ9vCCBGr+vmM+cTqInYVWxM3W2udc0eOD9a33nybF\no8W7rwKmK1ZgE0nt5eHe1q45knGKNelB8FiDKteVTEGHDVNCGc8nkMvQMSd2AZtj\nEa0KPY39RCqOWJlIfQIDAQAB\n-----END PUBLIC KEY-----","pkcs8-public-pem"),d=r(216).v4,y={url:"/",method:"get",baseURL:s.SERVER_URL,headers:{"X-Requested-With":"XMLHttpRequest"},params:{},data:{},timeout:1e4,withCredentials:!1,auth:{username:"luffy",password:"orz"},responseType:"json",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:2e3,maxRedirects:5},v=function(e){var t=e.status,r=(e.statustText,e.config,e.data);e.request,e.headers;if(200==+t){if(Object.keys(r).length){var n=r.code;r.msg;return 200==+n?(f("service face success!"),Promise.resolve(r)):(f("sever return data as: "),f(r),Promise.reject(r))}return f("service face success, but no data!"),Promise.reject(new Error("接入服务成功， 但无法连接服务"))}return f("service face failed!"),f(e),Promise.reject(new Error(e))},h=function(e){f("service get request throw error:"),f(e);var t=e.config,r=e.message,n=(e.request,e.response,t.auth),o=t.data,u=t.url,a=t.method;return Promise.reject({auth:n,data:o,url:u,method:a,message:r})},b=function(e){return e.then(function(e){return[null,e]}).catch(function(e){return[e]})},g=async function(e,t,r){var n=await b(e),o=u(n,2),a=o[0],i=o[1],s=void 0;return s=a?"function"==typeof r?r(a):Promise.reject(a):"function"==typeof t?t(i):Promise.resolve(i),await b(s)},E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.auth={AppKey:"",AppSecret:""}}return o(e,[{key:"__setAuth",value:function(e){this.auth=n({},this.auth,e)}},{key:"__test",value:function(){return g(this.sendRequest({url:"https://api.coindesk.com/v1/bpi/currentprice.json",method:"get"}),v,h)}},{key:"dataHandler",value:function(e){e.appkey=this.auth.AppKey,e.timestamp=Date.now();var t=Object.keys(e).reduce(function(t,r){return t[r]=p(m,e[r]),t},{});return t.signature=l(e,this.auth.AppSecret),t}},{key:"sendRequest",value:function(e){var t=n({},y,{headers:n({},y.headers,{"X-Requested-ID":d()})},e),r=t.method,o=t.data,u=t.params;switch(r){case"get":t.params=this.dataHandler(u);break;case"post":case"put":t.data=this.dataHandler(o);break;case"delete":t.params=this.dataHandler(u);break;case"patch":t.data=this.dataHandler(o);break;default:Promise.reject("请求方法不正确")}return a(t)}},{key:"sendComment",value:function(e){var t={url:s.ADD_COMMENT_URL,method:"post",data:e};return g(this.sendRequest(t),v,h)}},{key:"deleteComment",value:function(e){var t={url:""+s.DELETE_COMMENT_URL,method:"delete",params:{commentId:e}};return g(this.sendRequest(t),v,h)}},{key:"getCommentById",value:function(e){var t={url:""+s.GET_COMMENTS_URL,params:{commentId:e}};return g(this.sendRequest(t),v,h)}},{key:"deleteUserComments",value:function(e){var t={url:s.DELETE_COMMENT_URL,method:"delete",params:{userId:e}};return g(this.sendRequest(t),v,h)}},{key:"deleteTargetComments",value:function(e){s.DELETE_COMMENT_URL}},{key:"getCommentByTarget",value:function(e,t){var r={url:s.GET_COMMENTS_URL,params:n({targetId:e},t)};return g(this.sendRequest(r),v,h)}},{key:"getCommentByUser",value:function(e,t){var r={url:s.GET_COMMENTS_URL,params:n({userId:e},t)};return g(this.sendRequest(r),v,h)}},{key:"updateExtra",value:function(e){var t={url:s.UPDATEEXTRA,method:"patch",data:e};return g(this.sendRequest(t),v,h)}},{key:"setExtra",value:function(e){var t={url:s.SET_EXTRA,method:"put",data:e};return g(this.sendRequest(t),v,h)}}]),e}();e.exports=E},215:function(e,t,r){"use strict";t.SERVER_URL="http://127.0.0.1:8800/api/",t.ADD_COMMENT_URL="/comments",t.DELETE_COMMENT_URL="/comments",t.GET_COMMENTS_URL="/comments",t.SETEXTRA="/comments",t.UPDATE_EXTRA="/comments"},30:function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(5);t.checkType=function(e,t){return t.split("|").map(function(e){return e.trim()}).some(function(t){return{}.toString.call(e).slice(8,-1).toUpperCase()===t.toUpperCase()})},t.getType=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},t.logger=function(e){"object"===(void 0===e?"undefined":n(e))?(console.log("[LFment Service logged:]\n"),console.log(e)):console.log("[LFment Service logged:]"+e)};var u=function(e,t){return"secret"+function(e){return e&&Object.keys(e).sort()}(e).reduce(function(t,r){return t+=""+r,"object"===n(e[r])?t+=JSON.stringify(e[r]):t+=""+e[r],t},"")+t},a=function(e,t){e.version="1.0",e.format="json";var r=u(e,t);return i(r)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md5",r=o.createHash(t);return r.update(e),r.digest("hex")};t.encryptData=function e(t,r){if("object"===(void 0===r?"undefined":n(r))){var o={};return Object.keys(r).forEach(function(n){o[n]=e(t,r[n])}),o}return t.encrypt(r,"base64","utf-8")},t.verifier=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t===a(e,r)},t.signer=a},90:function(e,t,r){"use strict";var n=r(91),o=r(30);t.sdk=n,t.utils=o,t.default=n},91:function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(30),i=new(r(178)),s=function(){function e(t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.App={},this.config={},this.init(t,r),this}return u(e,[{key:"init",value:function(e,t){return"string"==typeof t&&(this.App={AppKey:e,AppSecret:t}),a.checkType(e,"Object")&&(this.App=o({},this.App,e)),i.__setAuth(this.App),this}},{key:"loadConfig",value:function(e){return this.config=e,this}},{key:"__checkCanRequest",value:function(){return"object"===n(this.App)&&!(!this.App.Appkey||!this.App.AppSecret)}},{key:"__test",value:function(){return i.__test()}},{key:"sendComment",value:function(e){var t=void 0;return["targetId","userId","content","createdTime","updatedTime"].every(function(r){return r in e||(t=r,!1)})?i.sendComment(e):Promise.reject("评论数据\b格式不正确，缺少\b参数"+t)}},{key:"deleteCommentById",value:function(e){return e?i.deleteComment(e):Promise.reject("请传人相关参数")}},{key:"deleteCommentsByUser",value:function(e){return e?i.deleteUserComments(e):Promise.reject("请传人相关参数")}},{key:"deleteCommentsByTarget",value:function(e){return e?i.deleteTargetComments(e):Promise.reject("请传人相关参数")}},{key:"getCommentById",value:function(e){return e?i.getCommentById(e):Promise.reject("请传人相关参数")}},{key:"getCommentByTarget",value:function(e,t){if(!e)return Promise.reject("请传人相关参数");if(a.checkType(t,"object")){t=["count","group","sort"].reduce(function(e,r){return e[r]=t[r],e},{})}return i.getCommentByTarget(e,t)}},{key:"getCommentByUser",value:function(e,t){if(!e)return Promise.reject("请传人相关参数");if(a.checkType(t,"object")){t=["count","group","sort"].reduce(function(e,r){return e[r]=t[r],e},{})}return i.getCommentByUser(e,t)}},{key:"setExtra",value:function(e){return e?i.setExtra(e):Promise.reject("请传人相关参数")}},{key:"updateExtra",value:function(e,t){if(!e)return Promise.reject("请传人相关参数");var r=void 0;return r=void 0!==t?function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t):e,i.updateExtra(r)}}]),e}();e.exports=s},94:function(e,t){},96:function(e,t){}});
//# sourceMappingURL=main.min.js.map